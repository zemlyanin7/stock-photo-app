# Настройка базы данных

## Первый запуск

При первом запуске приложения будет автоматически создана база данных `app.db` в корневой папке проекта.

## Настройка AI API

После запуска приложения необходимо настроить подключение к AI API:

1. Откройте приложение
2. Перейдите в **Настройки** → **AI настройки**
3. Заполните поля:
   - **AI Provider**: OpenAI или Anthropic
   - **API Key**: ваш API ключ от выбранного провайдера
   - **Model**: выберите модель (например, gpt-4-vision-preview)
   - **Base URL**: оставьте по умолчанию или укажите свой endpoint

## Получение API ключей

### OpenAI
1. Зарегистрируйтесь на https://platform.openai.com/
2. Пополните баланс (минимум $5)
3. Создайте API ключ в разделе API Keys
4. Скопируйте ключ в настройки приложения

### Anthropic (Claude)
1. Зарегистрируйтесь на https://console.anthropic.com/
2. Пополните баланс 
3. Создайте API ключ в разделе API Keys
4. Скопируйте ключ в настройки приложения

## Безопасность

⚠️ **ВАЖНО**: API ключи хранятся в базе данных `app.db`. 

- Никогда не делитесь файлом `app.db`
- Добавьте `*.db` в `.gitignore` (уже сделано)
- Регулярно меняйте API ключи
- Не публикуйте скриншоты с открытыми настройками

## Сброс настроек

Если нужно сбросить все настройки:

1. Закройте приложение
2. Удалите файл `app.db`
3. Запустите приложение снова - будет создана новая база

## Бэкап настроек

Для сохранения настроек:

1. Скопируйте файл `app.db` в безопасное место
2. При переустановке или переносе на другой компьютер - скопируйте файл обратно

## Структура базы данных

База данных содержит таблицы:
- `app_settings` - настройки приложения и AI API ключи
- `photo_batches` - информация о batch обработках фотографий  
- `photos` - метаданные обработанных фотографий
- `event_logs` - логи событий приложения
- `stock_configs` - настройки подключений к стоковым площадкам 